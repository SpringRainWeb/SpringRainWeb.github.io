(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4eac0d5c"],{"3d4a":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"ratings",staticClass:"shop-rating"},[s("div",{staticClass:"shop-rating-wrapper"},[s("div",{staticClass:"rating-wrapper"},[s("div",{staticClass:"rating-left"},[s("div",{staticClass:"big-rating"},[e._v(e._s(e.info.score))]),s("p",{staticClass:"base-rating"},[e._v("综合评分")]),s("p",{staticClass:"gray-word"},[e._v("高于周边商家"+e._s(e.info.rankRate)+"%")])]),s("div",{staticClass:"rating-right"},[s("div",{staticClass:"star-rating"},[s("cube-rate",{attrs:{disabled:!0},model:{value:e.info.serviceScore,callback:function(t){e.$set(e.info,"serviceScore",t)},expression:"info.serviceScore"}}),s("span",{staticClass:"star-detail"},[e._v("\n            服务态度\n            "),s("span",{staticClass:"star-num"},[e._v(e._s(e.info.serviceScore))])])],1),s("div",{staticClass:"star-rating"},[s("cube-rate",{attrs:{disabled:!0},model:{value:e.info.score,callback:function(t){e.$set(e.info,"score",t)},expression:"info.score"}}),s("span",{staticClass:"star-detail"},[e._v("\n            商品评分\n            "),s("span",{staticClass:"star-num"},[e._v(e._s(e.info.score))])])],1),s("div",{staticClass:"delivery"},[e._v("\n          送达时间：\n          "),s("span",{staticClass:"gray-word"},[e._v(e._s(e.info.deliveryTime)+"分钟")])])])]),s("div",{staticClass:"message-wrapper"},[s("div",{staticClass:"msg-title"},[s("div",{staticClass:"msg-btn"},[s("div",{class:{active:2==e.selectType},on:{click:function(t){e.selectType=2}}},[e._v("全部("+e._s(e.ratings.length)+")")]),s("div",{class:{active:0==e.selectType},on:{click:function(t){e.selectType=0}}},[e._v("满意("+e._s(e.satisfiedRate)+")")]),s("div",{class:{active:1==e.selectType},on:{click:function(t){e.selectType=1}}},[e._v("不满意("+e._s(e.ratings.length-e.satisfiedRate)+")")])]),s("cube-checkbox",{model:{value:e.onlyShowText,callback:function(t){e.onlyShowText=t},expression:"onlyShowText"}},[e._v("只看有内容的评价")])],1),s("ul",{staticClass:"msg-list"},e._l(e.showList,function(t,i){return s("li",{key:i},[s("div",{staticClass:"content-wrapper clearfix"},[s("img",{attrs:{src:t.avatar,alt:""}}),s("div",{staticClass:"rating-content"},[s("h1",{staticClass:"username"},[e._v("\n                "+e._s(t.username)+"\n                "),s("span",{staticClass:"rate-time"},[e._v(e._s(e._f("dateFormat")(t.rateTime)))])]),s("p",{staticClass:"rate-star"},[s("cube-rate",{attrs:{disabled:!0},model:{value:t.score,callback:function(s){e.$set(t,"score",s)},expression:"rating.score"}}),s("span",[e._v("\n                  "+e._s(t.deliveryTime)+"\n                  "),t.deliveryTime?s("span",[e._v("min")]):e._e()])],1),s("p",{staticClass:"rate-text"},[e._v(e._s(t.text))]),s("div",{staticClass:"rate-tags"},[s("i",{class:{"cubeic-good":0==t.rateType,"cubeic-bad":1==t.rateType}}),e._l(t.recommend,function(t,i){return s("span",{key:i},[e._v(e._s(t))])})],2)])])])}),0)])])])},n=[],a=s("e20c"),c=s("591a"),o=s("ecd2"),r=s("4f45"),l={name:"shop-rating",data:function(){return{selectType:2,onlyShowText:!1,list:!0}},methods:{_initScroll:function(){var e=this;this.listScroll=new o["a"](this.$refs.ratings,{pullDownRefresh:{threshold:50,stop:0},pullUpLoad:{threshold:-20},click:!0,probeType:3,startY:0,scrollbar:!1}),this.listScroll.on("pullingDown",function(){var t=e.$createToast({txt:"Loading...",mask:!0});t.show(),Object(r["setTimeout"])(function(){e.$store.dispatch("receiveRatings"),e.listScroll.finishPullDown(),t.hide()},1e3)}),this.listScroll.on("pullingUp",function(){var t=e.$createToast({txt:"Loading...",mask:!0});t.show(),Object(r["setTimeout"])(function(){e.$store.dispatch("addRatings"),e.listScroll.finishPullUp(),e.listScroll.refresh(),Object(r["setTimeout"])(function(){t.hide(),e.listScroll.scrollTo(0,e.listScroll.maxScrollY,500)},150)},1e3)})}},computed:Object(a["a"])({},Object(c["c"])(["info","ratings"]),Object(c["b"])(["satisfiedRate"]),{showList:function(){var e=this.selectType,t=this.onlyShowText,s=this.ratings;return s.filter(function(s){var i=s.rateType,n=s.text;return(2==e||i==e)&&(!t||n.length>0)})}}),mounted:function(){var e=this;this.$store.dispatch("receiveRatings",function(){e.$nextTick(function(){e._initScroll()})})}},u=l,f=(s("bfe0"),s("17cc")),d=Object(f["a"])(u,i,n,!1,null,"fdcb2c40",null);t["default"]=d.exports},"4f45":function(e,t,s){(function(e){var i="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,n=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(n.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new a(n.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},s("de8a"),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,s("66fa"))},"94d6":function(e,t,s){},bfe0:function(e,t,s){"use strict";var i=s("94d6"),n=s.n(i);n.a},de8a:function(e,t,s){(function(e,t){(function(e,s){"use strict";if(!e.setImmediate){var i,n=1,a={},c=!1,o=e.document,r=Object.getPrototypeOf&&Object.getPrototypeOf(e);r=r&&r.setTimeout?r:e,"[object process]"==={}.toString.call(e.process)?p():m()?v():e.MessageChannel?h():o&&"onreadystatechange"in o.createElement("script")?g():_(),r.setImmediate=l,r.clearImmediate=u}function l(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),s=0;s<t.length;s++)t[s]=arguments[s+1];var c={callback:e,args:t};return a[n]=c,i(n),n++}function u(e){delete a[e]}function f(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(s,i);break}}function d(e){if(c)setTimeout(d,0,e);else{var t=a[e];if(t){c=!0;try{f(t)}finally{u(e),c=!1}}}}function p(){i=function(e){t.nextTick(function(){d(e)})}}function m(){if(e.postMessage&&!e.importScripts){var t=!0,s=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=s,t}}function v(){var t="setImmediate$"+Math.random()+"$",s=function(s){s.source===e&&"string"===typeof s.data&&0===s.data.indexOf(t)&&d(+s.data.slice(t.length))};e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),i=function(s){e.postMessage(t+s,"*")}}function h(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;d(t)},i=function(t){e.port2.postMessage(t)}}function g(){var e=o.documentElement;i=function(t){var s=o.createElement("script");s.onreadystatechange=function(){d(t),s.onreadystatechange=null,e.removeChild(s),s=null},e.appendChild(s)}}function _(){i=function(e){setTimeout(d,0,e)}}})("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,s("66fa"),s("4c39"))}}]);
//# sourceMappingURL=chunk-4eac0d5c.8c52cea9.js.map