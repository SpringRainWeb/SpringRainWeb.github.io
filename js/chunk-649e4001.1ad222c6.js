(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-649e4001"],{1032:function(t,o,s){"use strict";var i=s("488c"),n=s.n(i);n.a},"18e5":function(t,o,s){},3019:function(t,o,s){"use strict";var i=s("18e5"),n=s.n(i);n.a},"449c":function(t,o,s){},4625:function(t,o,s){},"488c":function(t,o,s){},4953:function(t,o,s){"use strict";var i=s("4625"),n=s.n(i);n.a},"542d":function(t,o,s){"use strict";var i=s("449c"),n=s.n(i);n.a},fc15:function(t,o,s){"use strict";s.r(o);var i=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"shop-goods"},[s("div",{staticClass:"goods"},[s("div",{staticClass:"menu-wrapper"},[s("ul",{ref:"menuUl"},t._l(t.goods,function(o,i){return s("li",{key:i,class:{current:i==t.currentIndex},on:{click:function(o){return t.clickMenuItem(i)}}},[s("span",{staticClass:"goods-name"},[o.icon?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:o.icon,expression:"good.icon"}],attrs:{alt:""}}):t._e(),t._v("\n            "+t._s(o.name)+"\n          ")])])}),0)]),s("div",{staticClass:"foods-wrapper"},[s("ul",{ref:"foodsUl"},t._l(t.goods,function(o,i){return s("li",{key:i,staticClass:"food-list-hock"},[s("p",{staticClass:"title"},[t._v(t._s(o.name))]),s("ul",{staticClass:"goods-list"},t._l(o.foods,function(o,i){return s("li",{key:i,on:{click:function(s){return t.showFood(o)}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:o.icon,expression:"food.icon"}],attrs:{alt:""}}),s("div",{staticClass:"content"},[s("h2",{staticClass:"name ellipsis"},[t._v(t._s(o.name))]),o.description?s("p",{staticClass:"desc ellipsis"},[t._v(t._s(o.description))]):t._e(),s("div",{staticClass:"extra"},[s("span",{staticClass:"count"},[t._v("月售"+t._s(o.sellCount)+"份")]),s("span",[t._v("好评率"+t._s(o.rating)+"%")])]),s("div",{staticClass:"price"},[s("span",{staticClass:"now"},[t._v("￥"+t._s(o.price))]),o.oldPrice?s("span",{staticClass:"old"},[t._v("￥"+t._s(o.oldPrice))]):t._e()])]),s("cart-ctrl",{attrs:{food:o}})],1)}),0)])}),0)])]),s("food-content",{ref:"food",attrs:{food:t.food}}),s("shop-cart")],1)},n=[],a=s("e20c"),c=(s("1b79"),s("1294"),s("591a")),e=s("ecd2"),r=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"cartControl"},[s("i",{staticClass:"cubeic-add icon",on:{click:function(o){return o.stopPropagation(),t.updateFoodCount(!0)}}}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count,expression:"food.count"}],staticClass:"cart-count"},[t._v(t._s(t.food.count))]),s("transition",{attrs:{name:"move"}},[s("i",{directives:[{name:"show",rawName:"v-show",value:t.food.count,expression:"food.count"}],staticClass:"cubeic-remove icon",on:{click:function(o){return o.stopPropagation(),t.updateFoodCount(!1)}}})])],1)},l=[],d={name:"cartControl",data:function(){return{}},methods:{updateFoodCount:function(t){this.$store.dispatch("updateFoodCount",{isAdd:t,food:this.food})}},props:["food"]},u=d,f=(s("542d"),s("17cc")),h=Object(f["a"])(u,r,l,!1,null,"c665ec0a",null),p=h.exports,v=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("transition",{attrs:{name:"fade"}},[t.isShow?s("div",{staticClass:"food"},[s("div",{staticClass:"mask"}),s("div",{staticClass:"food-detail"},[s("i",{staticClass:"cubeic-back",on:{click:function(o){t.isShow=!t.isShow}}}),s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.food.image,expression:"food.image"}],attrs:{alt:""}}),s("div",{staticClass:"food-content"},[s("p",{staticClass:"info ellipsis"},[t._v(t._s(t.food.info))]),s("h2",{staticClass:"name"},[t._v(t._s(t.food.name))]),s("p",{staticClass:"desc"},[t._v("月销"+t._s(t.food.sellCount)+" 好评率"+t._s(t.food.rating)+"%")]),s("div",{staticClass:"price"},[s("span",{staticClass:"now"},[t._v("￥"+t._s(t.food.price))]),t.food.oldPrice?s("span",{staticClass:"old"},[t._v("￥"+t._s(t.food.oldPrice))]):t._e()])]),s("cart-control",{attrs:{food:t.food}})],1)]):t._e()])},C=[],m={name:"foodContent",data:function(){return{isShow:!1}},components:{cartControl:p},props:["food"],methods:{toggleShow:function(){this.isShow=!this.isShow}}},_=m,w=(s("3019"),Object(f["a"])(_,v,C,!1,null,"92303542",null)),g=w.exports,S=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"shop-cart"},[s("div",{staticClass:"shopCart-wrapper"},[s("i",{staticClass:"cubeic-mall",class:{active:t.totalCount},on:{click:function(o){return t.showList()}}},[t.totalCount?s("span",{staticClass:"count"},[t._v(t._s(t.totalCount))]):t._e()]),s("div",{staticClass:"price"},[t._v("\n      ￥"+t._s(t.totalPrice)+"\n      "),s("p",[t._v("配送费 ￥"+t._s(t.info.deliveryPrice)+"元")])]),s("div",{staticClass:"deliver",class:{pay:"enough"==t.payClass}},[t._v(t._s(t.payText))])]),s("transition",{attrs:{name:"move"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"list-content"},[s("h2",{staticClass:"title"},[t._v("\n        购物车\n        "),s("div",{staticClass:"clear",on:{click:t.clearCart}},[t._v("清空")])]),s("div",{staticClass:"scroll-wrapper"},[s("ul",t._l(t.cartFoods,function(o,i){return s("li",{key:i},[s("div",{staticClass:"name ellipsis"},[t._v(t._s(o.name))]),s("div",{staticClass:"food-price"},[t._v("￥"+t._s(o.price)+"元")]),s("cart-control",{attrs:{food:o}})],1)}),0)])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"list-mask",on:{click:t.showList}})],1)},k=[],b={name:"shopCart",data:function(){return{isShow:!1}},components:{cartControl:p},methods:{showList:function(){this.totalCount>0&&(this.isShow=!this.isShow)},clearCart:function(){var t=this;this.$createDialog({type:"confirm",icon:"cubeic-important",title:"确认清空购物车？",confirmBtn:{text:"确定",active:!0,disabled:!1,href:"javascript:;"},cancelBtn:{text:"取消",active:!1,disabled:!1,href:"javascript:;"},onConfirm:function(){t.$store.dispatch("clearFoodCount"),t.$createToast({type:"warn",time:1e3,txt:"清除成功"}).show()},onCancel:function(){}}).show()}},computed:Object(a["a"])({},Object(c["c"])(["cartFoods","info"]),Object(c["b"])(["totalCount","totalPrice"]),{payClass:function(){var t=this.totalPrice,o=this.info.minPrice;return t>=o?"enough":"not-enough"},payText:function(){var t=this.totalPrice,o=this.info.minPrice;return 0==t?"￥".concat(o,"起送"):t<o?"还差￥".concat(o-t,"元起送"):"去结算"},listShow:function(){var t=this;return 0==this.totalCount?(this.isShow=!1,!1):(this.isShow&&this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new e["a"](".scroll-wrapper",{click:!0})}),this.isShow)}})},x=b,y=(s("1032"),Object(f["a"])(x,S,k,!1,null,"3c25fe70",null)),$=y.exports,P={name:"shop-goods",data:function(){return{scrollY:0,tops:[],food:{}}},components:{cartCtrl:p,foodContent:g,shopCart:$},methods:{_initScroll:function(){var t=this;this.menuScroll=new e["a"](".menu-wrapper",{click:!0}),this.foodScroll=new e["a"](".foods-wrapper",{probeType:2,click:!0,swipeTime:1e3}),this.foodScroll.on("scroll",function(o){o.x;var s=o.y;t.scrollY=Math.abs(s)}),this.foodScroll.on("scrollEnd",function(o){o.x;var s=o.y;t.scrollY=Math.abs(s);var i=t.scrollY,n=t.tops,a=n.findIndex(function(t,o){return i>=t&&i<n[o+1]}),c=t.$refs.menuUl.children;t.menuScroll.scrollToElement(c[a],300)})},_initTops:function(){var t=[],o=0;t.push(o);var s=this.$refs.foodsUl.children;Array.prototype.slice.call(s).forEach(function(s){o+=s.clientHeight,t.push(o)}),this.tops=t},clickMenuItem:function(t){var o=this.tops[t];this.scrollY=o,this.foodScroll.scrollTo(0,-o,300)},showFood:function(t){this.food=t,this.$refs.food.toggleShow()}},computed:Object(a["a"])({},Object(c["c"])(["goods"]),{currentIndex:function(){var t=this.scrollY,o=this.tops,s=o.findIndex(function(s,i){return t>=s&&t<o[i+1]});return s}}),mounted:function(){var t=this;this.$store.dispatch("receiveGoods",function(){t.$nextTick(function(){t._initScroll(),t._initTops()})})}},j=P,T=(s("4953"),Object(f["a"])(j,i,n,!1,null,"634f525b",null));o["default"]=T.exports}}]);
//# sourceMappingURL=chunk-649e4001.1ad222c6.js.map