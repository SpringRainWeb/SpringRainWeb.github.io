(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a3923c2"],{1032:function(t,s,o){"use strict";var i=o("488c"),n=o.n(i);n.a},"449c":function(t,s,o){},"488c":function(t,s,o){},"542d":function(t,s,o){"use strict";var i=o("449c"),n=o.n(i);n.a},"7a71":function(t,s,o){},"9b83":function(t,s,o){"use strict";var i=o("ca77"),n=o.n(i);n.a},ca77:function(t,s,o){},d081:function(t,s,o){"use strict";var i=o("7a71"),n=o.n(i);n.a},fc15:function(t,s,o){"use strict";o.r(s);var i=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",{staticClass:"shop-goods"},[o("div",{staticClass:"goods"},[o("div",{staticClass:"menu-wrapper"},[o("ul",{ref:"menuUl"},t._l(t.goods,function(s,i){return o("li",{key:i,class:{current:i==t.currentIndex},on:{click:function(s){return t.clickMenuItem(i)}}},[o("span",{staticClass:"goods-name"},[s.icon?o("img",{attrs:{src:s.icon,alt:""}}):t._e(),t._v("\n            "+t._s(s.name)+"\n          ")])])}),0)]),o("div",{staticClass:"foods-wrapper"},[o("ul",{ref:"foodsUl"},t._l(t.goods,function(s,i){return o("li",{key:i,staticClass:"food-list-hock"},[o("p",{staticClass:"title"},[t._v(t._s(s.name))]),o("ul",{staticClass:"goods-list"},t._l(s.foods,function(s,i){return o("li",{key:i,on:{click:function(o){return t.showFood(s)}}},[o("img",{attrs:{src:s.icon,alt:""}}),o("div",{staticClass:"content"},[o("h2",{staticClass:"name ellipsis"},[t._v(t._s(s.name))]),s.description?o("p",{staticClass:"desc ellipsis"},[t._v(t._s(s.description))]):t._e(),o("div",{staticClass:"extra"},[o("span",{staticClass:"count"},[t._v("月售"+t._s(s.sellCount)+"份")]),o("span",[t._v("好评率"+t._s(s.rating)+"%")])]),o("div",{staticClass:"price"},[o("span",{staticClass:"now"},[t._v("￥"+t._s(s.price))]),s.oldPrice?o("span",{staticClass:"old"},[t._v("￥"+t._s(s.oldPrice))]):t._e()])]),o("cart-ctrl",{attrs:{food:s}})],1)}),0)])}),0)])]),o("food-content",{ref:"food",attrs:{food:t.food}}),o("shop-cart")],1)},n=[],c=o("e20c"),a=(o("1b79"),o("1294"),o("591a")),e=o("ecd2"),r=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",{staticClass:"cartControl"},[o("i",{staticClass:"cubeic-add icon",on:{click:function(s){return s.stopPropagation(),t.updateFoodCount(!0)}}}),o("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count,expression:"food.count"}],staticClass:"cart-count"},[t._v(t._s(t.food.count))]),o("transition",{attrs:{name:"move"}},[o("i",{directives:[{name:"show",rawName:"v-show",value:t.food.count,expression:"food.count"}],staticClass:"cubeic-remove icon",on:{click:function(s){return s.stopPropagation(),t.updateFoodCount(!1)}}})])],1)},l=[],d={name:"cartControl",data:function(){return{}},methods:{updateFoodCount:function(t){this.$store.dispatch("updateFoodCount",{isAdd:t,food:this.food})}},props:["food"]},u=d,f=(o("542d"),o("17cc")),h=Object(f["a"])(u,r,l,!1,null,"c665ec0a",null),p=h.exports,v=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("transition",{attrs:{name:"fade"}},[t.isShow?o("div",{staticClass:"food"},[o("div",{staticClass:"mask"}),o("div",{staticClass:"food-detail"},[o("i",{staticClass:"cubeic-back",on:{click:function(s){t.isShow=!t.isShow}}}),o("img",{attrs:{src:t.food.image,alt:""}}),o("div",{staticClass:"food-content"},[o("p",{staticClass:"info ellipsis"},[t._v(t._s(t.food.info))]),o("h2",{staticClass:"name"},[t._v(t._s(t.food.name))]),o("p",{staticClass:"desc"},[t._v("月销"+t._s(t.food.sellCount)+" 好评率"+t._s(t.food.rating)+"%")]),o("div",{staticClass:"price"},[o("span",{staticClass:"now"},[t._v("￥"+t._s(t.food.price))]),t.food.oldPrice?o("span",{staticClass:"old"},[t._v("￥"+t._s(t.food.oldPrice))]):t._e()])]),o("cart-control",{attrs:{food:t.food}})],1)]):t._e()])},C=[],m={name:"foodContent",data:function(){return{isShow:!1}},components:{cartControl:p},props:["food"],methods:{toggleShow:function(){this.isShow=!this.isShow}}},_=m,w=(o("9b83"),Object(f["a"])(_,v,C,!1,null,"06ee571e",null)),b=w.exports,S=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",{staticClass:"shop-cart"},[o("div",{staticClass:"shopCart-wrapper"},[o("i",{staticClass:"cubeic-mall",class:{active:t.totalCount},on:{click:function(s){return t.showList()}}},[t.totalCount?o("span",{staticClass:"count"},[t._v(t._s(t.totalCount))]):t._e()]),o("div",{staticClass:"price"},[t._v("\n      ￥"+t._s(t.totalPrice)+"\n      "),o("p",[t._v("配送费 ￥"+t._s(t.info.deliveryPrice)+"元")])]),o("div",{staticClass:"deliver",class:{pay:"enough"==t.payClass}},[t._v(t._s(t.payText))])]),o("transition",{attrs:{name:"move"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"list-content"},[o("h2",{staticClass:"title"},[t._v("\n        购物车\n        "),o("div",{staticClass:"clear",on:{click:t.clearCart}},[t._v("清空")])]),o("div",{staticClass:"scroll-wrapper"},[o("ul",t._l(t.cartFoods,function(s,i){return o("li",{key:i},[o("div",{staticClass:"name ellipsis"},[t._v(t._s(s.name))]),o("div",{staticClass:"food-price"},[t._v("￥"+t._s(s.price)+"元")]),o("cart-control",{attrs:{food:s}})],1)}),0)])])]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"list-mask",on:{click:t.showList}})],1)},k=[],g={name:"shopCart",data:function(){return{isShow:!1}},components:{cartControl:p},methods:{showList:function(){this.totalCount>0&&(this.isShow=!this.isShow)},clearCart:function(){var t=this;this.$createDialog({type:"confirm",icon:"cubeic-important",title:"确认清空购物车？",confirmBtn:{text:"确定",active:!0,disabled:!1,href:"javascript:;"},cancelBtn:{text:"取消",active:!1,disabled:!1,href:"javascript:;"},onConfirm:function(){t.$store.dispatch("clearFoodCount"),t.$createToast({type:"warn",time:1e3,txt:"清除成功"}).show()},onCancel:function(){}}).show()}},computed:Object(c["a"])({},Object(a["c"])(["cartFoods","info"]),Object(a["b"])(["totalCount","totalPrice"]),{payClass:function(){var t=this.totalPrice,s=this.info.minPrice;return t>=s?"enough":"not-enough"},payText:function(){var t=this.totalPrice,s=this.info.minPrice;return 0==t?"￥".concat(s,"起送"):t<s?"还差￥".concat(s-t,"元起送"):"去结算"},listShow:function(){var t=this;return 0==this.totalCount?(this.isShow=!1,!1):(this.isShow&&this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new e["a"](".scroll-wrapper",{click:!0})}),this.isShow)}})},x=g,y=(o("1032"),Object(f["a"])(x,S,k,!1,null,"3c25fe70",null)),$=y.exports,P={name:"shop-goods",data:function(){return{scrollY:0,tops:[],food:{}}},components:{cartCtrl:p,foodContent:b,shopCart:$},methods:{_initScroll:function(){var t=this;this.menuScroll=new e["a"](".menu-wrapper",{click:!0}),this.foodScroll=new e["a"](".foods-wrapper",{probeType:2,click:!0,swipeTime:1e3}),this.foodScroll.on("scroll",function(s){s.x;var o=s.y;t.scrollY=Math.abs(o)}),this.foodScroll.on("scrollEnd",function(s){s.x;var o=s.y;t.scrollY=Math.abs(o);var i=t.scrollY,n=t.tops,c=n.findIndex(function(t,s){return i>=t&&i<n[s+1]}),a=t.$refs.menuUl.children;t.menuScroll.scrollToElement(a[c],300)})},_initTops:function(){var t=[],s=0;t.push(s);var o=this.$refs.foodsUl.children;Array.prototype.slice.call(o).forEach(function(o){s+=o.clientHeight,t.push(s)}),this.tops=t},clickMenuItem:function(t){var s=this.tops[t];this.scrollY=s,this.foodScroll.scrollTo(0,-s,300)},showFood:function(t){this.food=t,this.$refs.food.toggleShow()}},computed:Object(c["a"])({},Object(a["c"])(["goods"]),{currentIndex:function(){var t=this.scrollY,s=this.tops,o=s.findIndex(function(o,i){return t>=o&&t<s[i+1]});return o}}),mounted:function(){var t=this;this.$store.dispatch("receiveGoods",function(){t.$nextTick(function(){t._initScroll(),t._initTops()})})}},j=P,T=(o("d081"),Object(f["a"])(j,i,n,!1,null,"7f63b20a",null));s["default"]=T.exports}}]);
//# sourceMappingURL=chunk-1a3923c2.29cf2149.js.map